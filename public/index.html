<!DOCTYPE html>
<html lang="ko" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MYSC IR 플랫폼 - 투자 분석 솔루션</title>
    <meta name="description" content="차세대 AI 기반 IR 투자 분석 플랫폼">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzA5NjlkYSIvPgo8cGF0aCBkPSJNOCAxNkgxNlYyNEg4VjE2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE2IDhIMjRWMTZIMTZWOFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPg==">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/app.css">
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons@4.29.0/dist/feather.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-container">
                <div class="header-brand">
                    <div class="brand-logo">M</div>
                    <div class="brand-name">MYSC IR 플랫폼</div>
                </div>
                
                <nav class="nav">
                    <a href="#analysis" class="nav-item active">분석</a>
                    <a href="#impact" class="nav-item">영향력</a>
                    <a href="#usage" class="nav-item">사용량</a>
                    <button class="logout-btn" id="logoutBtn" title="로그아웃">
                        <i data-feather="log-out" width="16" height="16"></i>
                        <span>나가기</span>
                    </button>
                    <button class="theme-toggle" id="themeToggle" title="Toggle theme">
                        <i data-feather="moon" width="20" height="20"></i>
                    </button>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Analysis Section -->
            <section id="analysis" class="section active">
                <div class="page-header">
                    <h1 class="page-title">IR 분석 플랫폼</h1>
                    <p class="page-subtitle">
                        IR 자료를 업로드하여 AI 기반 투자 분석을 시작하세요. 최대 50MB까지 지원합니다.
                    </p>
                </div>

                <!-- Upload Section -->
                <div class="upload-section card">
                    <form id="analysisForm">
                        <div class="form-group mb-6">
                            <label for="companyName" class="form-label">
                                분석 대상
                            </label>
                            <input 
                                type="text" 
                                id="companyName" 
                                name="companyName" 
                                class="form-input" 
                                placeholder="이름을 입력하세요"
                                required
                            >
                        </div>

                        <div class="form-group mb-6">
                            <label class="form-label">
                                IR Documents
                            </label>
                            <div class="upload-area" id="uploadArea">
                                <input type="file" id="fileInput" name="files" accept=".pdf,.xlsx,.xls,.docx,.doc" multiple hidden>
                                <div class="upload-icon">
                                    <i data-feather="upload-cloud"></i>
                                </div>
                                <div class="upload-title">파일을 여기에 끌어다 놓거나 클릭하세요</div>
                                <div class="upload-subtitle">PDF, Excel, Word 문서 (최대 10MB)</div>
                            </div>
                            
                            <div id="fileList" class="file-list" style="display: none;"></div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-lg" id="analyzeBtn">
                                <i data-feather="zap" width="20" height="20"></i>
                                <span>분석 시작</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Progress Section -->
                <div id="progressSection" class="progress-section" style="display: none;">
                    <div class="progress-header">
                        <h2 class="progress-title">IR 자료 분석 중</h2>
                        <p class="progress-subtitle">AI가 IR 자료를 분석하고 있습니다</p>
                    </div>

                    <div class="progress-steps">
                        <div class="progress-step" id="step1">
                            <div class="step-circle">
                                <i data-feather="upload" width="16" height="16"></i>
                            </div>
                            <span class="step-label">업로드</span>
                        </div>
                        <div class="progress-step" id="step2">
                            <div class="step-circle">
                                <i data-feather="file-text" width="16" height="16"></i>
                            </div>
                            <span class="step-label">Extract</span>
                        </div>
                        <div class="progress-step" id="step3">
                            <div class="step-circle">
                                <i data-feather="cpu" width="16" height="16"></i>
                            </div>
                            <span class="step-label">Analyze</span>
                        </div>
                        <div class="progress-step" id="step4">
                            <div class="step-circle">
                                <i data-feather="check" width="16" height="16"></i>
                            </div>
                            <span class="step-label">Complete</span>
                        </div>
                    </div>

                    <div class="progress mb-4">
                        <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                    </div>

                    <div class="progress-status text-center">
                        <span id="progressText" class="text-secondary">Initializing analysis...</span>
                    </div>
                </div>

                <!-- Conversational Analysis Section -->
                <div id="conversationSection" class="conversation-section" style="display: none;">
                    <div class="conversation-container">
                        <div class="conversation-header">
                            <div class="conversation-title">AI Investment Analyst</div>
                            <div class="conversation-subtitle">대화형 투자 분석이 진행 중입니다</div>
                        </div>
                        <div class="conversation-messages" id="conversationMessages">
                            <!-- Messages will be dynamically added here -->
                        </div>
                        <div class="custom-question">
                            <div class="question-input-wrapper">
                                <input type="text" class="question-input" placeholder="추가 질문을 입력하세요..." id="questionInput">
                                <button class="send-button" id="sendButton">
                                    <i data-feather="send" width="16" height="16"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Results Section -->
                <div id="resultsSection" class="results-section" style="display: none;">
                    <div class="results-header">
                        <h2 class="results-title">분석 완료</h2>
                        <div class="results-actions">
                            <button class="btn btn-secondary" id="exportPdf">
                                <i data-feather="download" width="16" height="16"></i>
                                <span>Export PDF</span>
                            </button>
                            <button class="btn btn-secondary" id="exportWord">
                                <i data-feather="file-text" width="16" height="16"></i>
                                <span>Export Word</span>
                            </button>
                            <button class="btn btn-primary" id="shareReport">
                                <i data-feather="share-2" width="16" height="16"></i>
                                <span>Share</span>
                            </button>
                        </div>
                    </div>

                    <div class="results-tabs">
                        <button class="tab-button active" data-tab="summary">요약 보고서</button>
                        <button class="tab-button" data-tab="investment">Investment Analysis</button>
                        <button class="tab-button" data-tab="market">Market Analysis</button>
                        <button class="tab-button" data-tab="financial">재무 분석</button>
                        <button class="tab-button" data-tab="risk">위험 평가</button>
                        <button class="tab-button" data-tab="recommendations">Recommendations</button>
                    </div>

                    <div class="results-content">
                        <div id="summary" class="tab-content active">
                            <div class="stats-grid mb-8">
                                <div class="stat-card">
                                    <div class="stat-label">Investment Score</div>
                                    <div class="stat-value">8.5<span class="text-secondary">/10</span></div>
                                    <div class="stat-change positive">+15% from last quarter</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">시장 위치</div>
                                    <div class="stat-value">#2</div>
                                    <div class="stat-change">Stable</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-label">Risk Level</div>
                                    <div class="stat-value">Low</div>
                                    <div class="stat-change positive">Improved</div>
                                </div>
                            </div>
                            
                            <div id="summaryContent" class="content-area">
                                <!-- Summary content will be injected here -->
                            </div>
                        </div>
                        
                        <div id="investment" class="tab-content" style="display: none;">
                            <div id="investmentContent" class="content-area">
                                <!-- Investment analysis content will be injected here -->
                            </div>
                        </div>
                        
                        <div id="market" class="tab-content" style="display: none;">
                            <div id="marketContent" class="content-area">
                                <!-- Market analysis content will be injected here -->
                            </div>
                        </div>
                        
                        <div id="financial" class="tab-content" style="display: none;">
                            <div id="financialContent" class="content-area">
                                <!-- Financial analysis content will be injected here -->
                            </div>
                        </div>
                        
                        <div id="risk" class="tab-content" style="display: none;">
                            <div id="riskContent" class="content-area">
                                <!-- Risk analysis content will be injected here -->
                            </div>
                        </div>
                        
                        <div id="recommendations" class="tab-content" style="display: none;">
                            <div id="recommendationsContent" class="content-area">
                                <!-- Recommendations content will be injected here -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Impact Section -->
            <section id="impact" class="section" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Theory of Change Analysis</h1>
                    <p class="page-subtitle">
                        Generate visual impact diagrams from your organization's impact reports and strategic documents.
                    </p>
                </div>
                
                <!-- Impact content here -->
            </section>

            <!-- Usage Section -->
            <section id="usage" class="section" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Usage Dashboard</h1>
                    <p class="page-subtitle">
                        플랫폼 사용량과 처리 통계를 확인하세요.
                    </p>
                </div>
                
                <!-- Usage content here -->
            </section>
        </main>
    </div>

    <!-- JavaScript -->
    <script src="/static/js/supabase.js"></script>
    <script src="/static/js/app.js"></script>
    <script>
        // Initialize Feather icons
        feather.replace();
    </script>
</body>
</html>